1Ô∏è‚É£ Create IAM Role for Lambda
Go to

IAM ‚Üí Roles ‚Üí Create role

Trusted entity

AWS service

Lambda

Permissions

Attach:

AWSLambdaBasicExecutionRole

Then add inline policy üëá

{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::mlops-creditcard/monitoring_outputs/retraining_decision/*"
    }
  ]
}

Role name
lambda-retraining-decision-role


‚úÖ Create role

2Ô∏è‚É£ Create Lambda Function
Go to

Lambda ‚Üí Create function

Author from scratch

Function name:

check_retraining_decision


Runtime:

Python 3.10


Execution role:

Use existing role

Select:

lambda-retraining-decision-role


Click Create function

3Ô∏è‚É£ Paste Lambda Code

In Code ‚Üí lambda_function.py, paste üëá

import boto3
import csv
import io

s3 = boto3.client("s3")

BUCKET = "mlops-creditcard"
KEY = "monitoring_outputs/retraining_decision/retraining_decision.csv"

def lambda_handler(event, context):
    obj = s3.get_object(Bucket=BUCKET, Key=KEY)
    body = obj["Body"].read().decode("utf-8")

    reader = csv.reader(io.StringIO(body))
    rows = list(reader)

    decision = rows[1][0].strip().upper()

    return {
        "retraining_required": decision
    }


Click Deploy

4Ô∏è‚É£ Test Lambda (CRITICAL)
Create test event

Name: test

Body:

{}

Click Test
Expected output:
{
  "retraining_required": "YES"
}


If you see:

‚ùå AccessDenied ‚Üí IAM policy wrong

‚ùå IndexError ‚Üí CSV format wrong

Fix before moving on.

5Ô∏è‚É£ Create Retraining Trigger Step Function
Go to

Step Functions ‚Üí Create state machine

Author with code

Type: Standard

Paste definition üëá
{
  "Comment": "Auto retraining trigger based on monitoring CSV output",
  "StartAt": "ReadRetrainingDecision",
  "States": {
    "ReadRetrainingDecision": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "Parameters": {
        "FunctionName": "check_retraining_decision"
      },
      "ResultSelector": {
        "decision.$": "$.Payload.retraining_required"
      },
      "ResultPath": "$.decision",
      "Next": "DecisionChoice"
    },

    "DecisionChoice": {
      "Type": "Choice",
      "Choices": [
        {
          "Variable": "$.decision.decision",
          "StringEquals": "YES",
          "Next": "TriggerTrainingPipeline"
        }
      ],
      "Default": "NoRetrainingNeeded"
    },

    "TriggerTrainingPipeline": {
      "Type": "Task",
      "Resource": "arn:aws:states:::states:startExecution",
      "Parameters": {
        "StateMachineArn": "PASTE_YOUR_MAIN_PIPELINE_ARN_HERE",
        "Input": {
          "run": "all",
          "triggered_by": "monitoring",
          "reason": "auto_retraining"
        }
      },
      "End": true
    },

    "NoRetrainingNeeded": {
      "Type": "Succeed"
    }
  }
}

Replace:
PASTE_YOUR_MAIN_PIPELINE_ARN_HERE

IAM Role

Create new role automatically

Or reuse your existing Step Functions role

Name
creditcard-auto-retraining-trigger


Click Create state machine

6Ô∏è‚É£ Test Step Function Manually
Click Start execution

Input:

{}

Expected behavior
CSV value	Result
YES	Training pipeline starts
NO	Workflow ends successfully

Check:

Execution graph

Main pipeline execution started

7Ô∏è‚É£ (Optional) Schedule It Automatically
EventBridge ‚Üí Create rule

Name:

retraining-check-schedule


Schedule:

cron(0 3 ? * MON *)   # Monday 8:30 AM IST

Target

Step Functions

Select:

creditcard-auto-retraining-trigger

8Ô∏è‚É£ End-to-End Validation Checklist

‚úÖ Monitoring job ran
‚úÖ CSV present in S3
‚úÖ Lambda returns YES/NO
‚úÖ Step Function branches correctly
‚úÖ Training pipeline starts automatically

üî• What You Have Now

Fully automated retraining

Monitoring-driven orchestration

No human intervention

Enterprise-grade MLOps pattern

If you want next:

cooldown window (don‚Äôt retrain too often)

severity-based retraining

Slack / SNS alert before retraining

versioned retraining history in DynamoDB

Just say the word üöÄ